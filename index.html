<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>استبيان الاستشارات الطبية</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
<style>
body { font-family: 'Cairo', sans-serif; background: linear-gradient(135deg, #e0f7ff, #ffffff); margin: 0; padding: 0; direction: rtl; }
.quiz-container { max-width: 700px; background: #fff; margin: 50px auto; padding: 40px 30px; border-radius: 25px; box-shadow: 0 15px 35px rgba(0,0,0,0.15); transition: all 0.3s ease; }
.quiz-container:hover { transform: translateY(-5px); }
h2 { text-align: center; color: #0275d8; margin-bottom: 25px; font-size: 28px; }
.question { font-size: 22px; margin: 25px 0 15px; font-weight: 700; }
.answers button { width: 100%; padding: 18px; margin: 12px 0; border: none; border-radius: 20px; background: #0275d8; color: #fff; font-size: 18px; font-weight: bold; cursor: pointer; transition: 0.3s; }
.answers button:hover { background: #025aa5; transform: scale(1.03); }
#result { margin-top: 25px; font-size: 20px; font-weight: bold; text-align: center; color: #333; }
.progress-bar { width: 100%; background: #eee; border-radius: 12px; overflow: hidden; margin-bottom: 25px; height: 22px; }
.progress { height: 100%; background: #0275d8; width: 0%; transition: width 0.4s ease-in-out; }
@media (max-width: 768px){
    .quiz-container { margin: 30px 20px; padding: 30px 20px; }
    h2 { font-size: 24px; }
    .question { font-size: 20px; }
}
</style>
</head>
<body>

<div class="quiz-container">
    <h2>استبيان الاستشارات الطبية</h2>
    <div class="progress-bar">
        <div class="progress" id="progress"></div>
    </div>
    <div id="quiz">
        <div class="question" id="question">سوف يظهر السؤال هنا</div>
        <div class="answers" id="answers"></div>
    </div>
    <div id="result"></div>
</div>

<script>
// ==== ضع هنا أسئلتك الطبية ====
const quizData = [
    // مثال:
    // {question: "هل تشعر بأي أعراض؟", answers:["نعم","لا"], values:[1,0]}
];

let currentQuestion = 0;
let score = 0;
let userAnswers = [];

// رابط Web App الخاص بـ Google Sheets
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbxgpRr_5nZyxXjq1NvB9esUM51leNlxThk9UeZrvxsmI-vr0cWFj-ktLFQ8TGpF693R/exec"; 

function loadQuestion() {
    if(currentQuestion >= quizData.length){
        document.getElementById("quiz").style.display = "none";
        document.getElementById("progress").style.width = "100%";
        
        let advice = "";
        if(score <= 2) advice = "لا تحتاج لاستشارة فورية، لكن راقب صحتك.";
        else if(score <= 5) advice = "قد يكون من المفيد استشارة طبيب قريبًا.";
        else advice = "ننصحك بجدية بزيارة طبيب مختص فورًا.";

        document.getElementById("result").innerText = `نتيجتك: ${score} - ${advice}`;
        sendToGoogleSheet();
        return;
    }

    const q = quizData[currentQuestion];
    document.getElementById("question").innerText = q.question;

    const answersDiv = document.getElementById("answers");
    answersDiv.innerHTML = "";
    q.answers.forEach((ans,index)=>{
        const btn = document.createElement("button");
        btn.innerText = ans;
        btn.onclick = ()=>{
            score += q.values[index];
            userAnswers.push(ans);
            currentQuestion++;
            updateProgress();
            loadQuestion();
        };
        answersDiv.appendChild(btn);
    });
}

function updateProgress(){
    const percent = (currentQuestion/quizData.length)*100;
    document.getElementById("progress").style.width = percent + "%";
}

function sendToGoogleSheet(){
    fetch(WEB_APP_URL,{
        method:"POST",
        body: JSON.stringify({answers:userAnswers}),
        headers:{"Content-Type":"application/json"}
    }).then(res=>res.json())
      .then(data=>console.log("تم حفظ البيانات:", data))
      .catch(err=>console.error("خطأ في الإرسال:", err));
}

loadQuestion();
</script>

</body>
</html>
